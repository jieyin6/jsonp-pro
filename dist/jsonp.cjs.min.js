"use strict";function typeCheck(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}function randNum(){return(new Date).getTime().toString()+Math.ceil(1e10*Math.random()).toString()}function index(e,t){var n,r,c,o=document.querySelector("head"),a=document.createElement("script"),i="",u="callback",l="callback_".concat(randNum()),m=!1,s=6e4,p=[];if(!e)throw new ReferenceError("No url ! Url is necessary !");if(!typeCheck(e,"String"))throw new TypeError("Url must be string !");var f={data:function(){var e=t.data;if(typeCheck(e,"Object"))for(var n in e)i+="".concat(n,"=").concat(e[n],"&");else{if(!typeCheck(e,"String"))throw new TypeError("data must be object or string !");i=e+"&"}},success:function(){if(!typeCheck(c=t.success,"Function"))throw new Error("param success must be function !")},loaded:function(){if(!typeCheck(r=t.loaded,"Function"))throw new TypeError("param loaded must be function !")},callback:function(){if(!typeCheck(u=t.callback,"String"))throw new TypeError("param callback must be string !")},callbackName:function(){if(!typeCheck(l=t.callbackName,"String"))throw new TypeError("param callbackName must be string !")},noCallback:function(){if(!typeCheck(m=t.noCallback,"Boolean"))throw new TypeError("param noCallback must be boolean !")},charset:function(){var e=t.charset;if(!typeCheck(e,"String"))throw new TypeError("param charset must be string !");a.charset=e},timeoutTime:function(){if(!typeCheck(s=t.timeoutTime,"Number"))throw new TypeError("param timeoutTime must be number !")},timeout:function(){if(!typeCheck(t.timeout,"Function"))throw new TypeError("param timeout must be function !");function e(){n=setTimeout(function(){a.parentNode&&a.parentNode.removeChild(a),window.hasOwnProperty(l)&&delete window[l],clearTimeout(n),t.timeout()},s)}p.push(e)}};for(var h in t)f[h]();p.forEach(function(e){e()}),m&&""!=i?-1==e.indexOf("?")?e+="?".concat(i.slice(0,-2)):e+="&".concat(i.slice(0,-2)):m||(window[l]=function(e){c&&c(e),o.removeChild(a)},-1==e.indexOf("?")?e+="?".concat(i).concat(u,"=").concat(l):e+="&".concat(i).concat(u,"=").concat(l)),e=encodeURI(e),console.log(e),a.addEventListener("load",function e(){a.removeEventListener("load",e),r&&r(),clearTimeout(n)}),a.src=e,o.appendChild(a)}module.exports=index;
