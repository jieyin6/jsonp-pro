define(function(){"use strict";function e(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}return function(t,r){var n,o,a,c=document.querySelector("head"),i=document.createElement("script"),u="",l="callback",m="callback_".concat((new Date).getTime().toString()+Math.ceil(1e10*Math.random()).toString()),s=!1,f=6e4,w=[];if(!t)throw new ReferenceError("No url ! Url is necessary !");if(!e(t,"String"))throw new TypeError("Url must be string !");var b={data:function(){var t=r.data;if(e(t,"Object"))for(var n in t)u+="".concat(n,"=").concat(t[n],"&");else{if(!e(t,"String"))throw new TypeError("data must be object or string !");u=t+"&"}},success:function(){if(!e(a,"Function"))throw new Error("param success must be function !");a=r.success},loaded:function(){if(!e(o=r.loaded,"Function"))throw new TypeError("param loaded must be function !")},callback:function(){if(!e(l=r.callback,"String"))throw new TypeError("param callback must be string !")},callbackName:function(){if(!e(m=r.callbackName,"String"))throw new TypeError("param callbackName must be string !")},noCallback:function(){if(!e(s=r.noCallback,"Boolean"))throw new TypeError("param noCallback must be boolean !")},charset:function(){var t=r.charset;if(!e(t,"String"))throw new TypeError("param charset must be string !");i.charset=t},timeoutTime:function(){if(!e(f=r.timeoutTime,"Number"))throw new TypeError("param timeoutTime must be number !")},timeout:function(){if(!e(t,"Function"))throw new TypeError("param timeout must be function !");function t(){n=setTimeout(function(){i.parentNode&&i.parentNode.removeChild(i),window.hasOwnProperty(m)&&delete window[m],clearTimeout(n),r.timeout()},f)}w.push(t)}};for(var d in r)b[d]();w.forEach(function(e){e()}),s?(t+=u.slice(0,-2),console.log(t)):(window[m]=function(e){a&&a(e),c.removeChild(i)},t+="?".concat(u).concat(l,"=").concat(m)),i.addEventListener("load",function e(){i.removeEventListener("load",e),o&&o(),clearTimeout(n)}),i.src=t,c.appendChild(i)}});
