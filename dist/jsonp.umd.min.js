!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).jsonp=t()}(this,function(){"use strict";function e(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}return function(t,n){var o,r,c,a=document.querySelector("head"),i=document.createElement("script"),u="",l="callback",s="callback_".concat((new Date).getTime().toString()+Math.ceil(1e10*Math.random()).toString()),f=!1,m=6e4,d=[];if(!t)throw new ReferenceError("No url ! Url is necessary !");if(!e(t,"String"))throw new TypeError("Url must be string !");var p={data:function(){var t=n.data;if(e(t,"Object"))for(var o in t)u+="".concat(o,"=").concat(t[o],"&");else{if(!e(t,"String"))throw new TypeError("data must be object or string !");u=t+"&"}},success:function(){if(!e(c=n.success,"Function"))throw new Error("param success must be function !")},loaded:function(){if(!e(r=n.loaded,"Function"))throw new TypeError("param loaded must be function !")},callback:function(){if(!e(l=n.callback,"String"))throw new TypeError("param callback must be string !")},callbackName:function(){if(!e(s=n.callbackName,"String"))throw new TypeError("param callbackName must be string !")},noCallback:function(){if(!e(f=n.noCallback,"Boolean"))throw new TypeError("param noCallback must be boolean !")},charset:function(){var t=n.charset;if(!e(t,"String"))throw new TypeError("param charset must be string !");i.charset=t},timeoutTime:function(){if(!e(m=n.timeoutTime,"Number"))throw new TypeError("param timeoutTime must be number !")},timeout:function(){if(!e(n.timeout,"Function"))throw new TypeError("param timeout must be function !");function t(){o=setTimeout(function(){i.parentNode&&i.parentNode.removeChild(i),window.hasOwnProperty(s)&&delete window[s],clearTimeout(o),n.timeout()},m)}d.push(t)}};for(var w in n)p[w]();d.forEach(function(e){e()}),f&&""!=u?-1==t.indexOf("?")?t+="?".concat(u.slice(0,-2)):t+="&".concat(u.slice(0,-2)):f||(window[s]=function(e){c&&c(e),a.removeChild(i)},-1==t.indexOf("?")?t+="?".concat(u).concat(l,"=").concat(s):t+="&".concat(u).concat(l,"=").concat(s)),t=encodeURI(t),console.log(t),i.addEventListener("load",function e(){i.removeEventListener("load",e),r&&r(),clearTimeout(o)}),i.src=t,a.appendChild(i)}});
